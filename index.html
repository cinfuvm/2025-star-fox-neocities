<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Star Fox 64</title>

  <!-- Fuente retro -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Pantalla de inicio -->
  <section id="inicio" class="hero">
    <img src="Images/arwing.gif" alt="Arwing girando" class="arwing">
    <img src="Images/logosf.png" alt="Star Fox 64" class="logo">
    <img src="Images/foxteam.png" alt="Equipo Star Fox" class="foxteam">

    <p id="start-text" class="retro">
      Presione <span class="circle"></span>START
    </p>

    <p class="retro copyright">©1997 Nintendo</p>
  </section>

  <!-- Sección Historia (pantalla de misión) -->
  <section id="historia" class="historia">
    <h2 class="section-title">HISTORIA</h2>
    <!-- Planeta -->
    <img src="Images/corneria.png" alt="Corneria" class="planet">

    <!-- General Pepper -->
    <img src="Images/PepperIdle.png" alt="General Pepper" id="pepper" class="pepper">

    <!-- Equipo Star Fox (imagen de transmisión) -->
    <img src="Images/foxteamtransmission.png" alt="Equipo Star Fox" class="starfox">

    <!-- Texto de diálogo -->
    <p id="dialog-text" class="dialog"></p>
  </section>

  <!-- Script: comportamiento -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const startText = document.getElementById('start-text');
    const historia = document.getElementById('historia');
    const pepper = document.getElementById('pepper');
    const starfox = document.querySelector('.starfox');
    const dialog = document.getElementById('dialog-text');

    // Scroll suave al hacer click en START
    startText.addEventListener('click', () => {
      historia.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });

    // Texto que se tipeará
    const text = `¡Necesitamos su ayuda, Star Fox! ¡Andross nos ha declarado la guerra! 
A invadido el sistema Lylat... ¡y está intentando apoderarse de Corneria! 
Nuestro ejercito no podrá detenerlo por sí solo. ¡Dense prisa, Star Fox!`;

    let typed = false;
    const speed = 40;

    function typeWriter(index = 0) {
      if (index < text.length) {
        dialog.innerHTML += text.charAt(index);
        // Cambiar Pepper Idle/Talking
        pepper.src = (index % 4 < 2) ? "Images/PepperTalking.gif" : "Images/PepperIdle.png";
        setTimeout(() => typeWriter(index + 1), speed);
      } else {
        pepper.src = "Images/PepperIdle.png";
      }
    }

    function startHistoryAnimations() {
      if (typed) return;
      typed = true;

      // fade-in de transmisión
      starfox.classList.add('visible');

      // arrancar tipeo después de un delay
      setTimeout(() => typeWriter(0), 800);
    }

    // Inicia animaciones cuando la sección historia entra en pantalla
    const observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          startHistoryAnimations();
          obs.disconnect();
        }
      });
    }, { threshold: 0.3 });

    observer.observe(historia);
  });
  </script>

</body>
</html>
